{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/hooks/useWebRTC.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState, useCallback } from 'react';\nimport io, { Socket } from 'socket.io-client';\n\nconst STUN_SERVERS = {\n    iceServers: [\n        {\n            urls: [\n                \"stun:stun.l.google.com:19302\",\n                \"stun:global.stun.twilio.com:3478\",\n            ],\n        },\n    ],\n};\n\nexport type WebRTCStream = {\n    id: string;\n    stream: MediaStream;\n    isLocal?: boolean;\n};\n\nexport type ChatMessage = {\n    id: string;\n    userId: string;\n    userName: string;\n    message: string;\n    timestamp: number;\n};\n\nexport function useWebRTC(roomId: string, username: string) {\n    const [socket, setSocket] = useState<Socket | null>(null);\n    const [localStream, setLocalStream] = useState<MediaStream | null>(null);\n    const [peers, setPeers] = useState<WebRTCStream[]>([]);\n    const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n\n    const peersRef = useRef<{ [key: string]: RTCPeerConnection }>({});\n    const localStreamRef = useRef<MediaStream | null>(null);\n    const socketRef = useRef<Socket | null>(null);\n\n    const createPeer = useCallback((userId: string, initiator: boolean, stream: MediaStream, socket: Socket) => {\n        const pc = new RTCPeerConnection(STUN_SERVERS);\n        peersRef.current[userId] = pc;\n\n        stream.getTracks().forEach(track => {\n            pc.addTrack(track, stream);\n        });\n\n        pc.onicecandidate = (event) => {\n            if (event.candidate) {\n                socket.emit('ice-candidate', {\n                    roomId,\n                    candidate: event.candidate,\n                    to: userId,\n                    from: socket.id\n                });\n            }\n        };\n\n        pc.ontrack = (event) => {\n            console.log(\"Received remote track from\", userId, \"Track kind:\", event.track.kind);\n            setPeers(prev => {\n                const existing = prev.find(p => p.id === userId);\n                if (existing) {\n                    console.log(\"Updating existing peer stream for\", userId);\n                    return prev.map(p => p.id === userId ? { ...p, stream: event.streams[0] } : p);\n                }\n                console.log(\"Adding new peer to state:\", userId);\n                return [...prev, { id: userId, stream: event.streams[0], isLocal: false }];\n            });\n        };\n\n        if (initiator) {\n            console.log('Creating OFFER for peer:', userId);\n            pc.createOffer().then(offer => {\n                console.log('Offer created, setting local description');\n                return pc.setLocalDescription(offer);\n            }).then(() => {\n                console.log('Sending OFFER to:', userId);\n                socket.emit('offer', {\n                    roomId,\n                    sdp: pc.localDescription,\n                    to: userId,\n                    from: socket.id\n                });\n            }).catch(err => {\n                console.error('Error creating/sending offer:', err);\n            });\n        }\n\n        return pc;\n    }, [roomId]);\n\n    const [error, setError] = useState<Error | null>(null);\n    const [isConnected, setIsConnected] = useState(false);\n\n    useEffect(() => {\n        let isMounted = true;\n        const socketUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';\n        console.log('Connecting to socket at:', socketUrl);\n\n        const s = io(socketUrl, {\n            path: '/socket.io',\n            transports: ['websocket', 'polling']\n        });\n        setSocket(s);\n        socketRef.current = s;\n\n        const onConnect = () => {\n            console.log('Socket connected with ID:', s.id);\n            console.log('Joining room:', roomId);\n            setIsConnected(true);\n            s.emit('join-room', roomId, s.id);\n        };\n\n        const onDisconnect = () => {\n            console.log('Socket disconnected');\n            setIsConnected(false);\n        };\n\n        if (s.connected) {\n            onConnect();\n        } else {\n            s.on('connect', onConnect);\n        }\n\n        s.on('disconnect', onDisconnect);\n\n        navigator.mediaDevices.getUserMedia({\n            audio: true,\n            video: true\n        }).then(stream => {\n            if (!isMounted) {\n                stream.getTracks().forEach(track => track.stop());\n                return;\n            }\n            setLocalStream(stream);\n            localStreamRef.current = stream;\n\n            s.on('user-connected', (userId: string) => {\n                console.log('User connected event received for:', userId);\n                console.log('I am initiator, creating peer...');\n                createPeer(userId, true, stream, s);\n            });\n\n            s.on('offer', async (data) => {\n                console.log('Received OFFER from:', data.from);\n                const pc = createPeer(data.from, false, stream, s);\n                await pc.setRemoteDescription(new RTCSessionDescription(data.sdp));\n                console.log('Remote description set (Offer)');\n\n                const answer = await pc.createAnswer();\n                await pc.setLocalDescription(answer);\n                console.log('Sending ANSWER to:', data.from);\n                s.emit('answer', { roomId, sdp: answer, to: data.from, from: s.id });\n            });\n\n            s.on('answer', async (data) => {\n                console.log('Received ANSWER from:', data.from);\n                const pc = peersRef.current[data.from];\n                if (pc) {\n                    await pc.setRemoteDescription(new RTCSessionDescription(data.sdp));\n                    console.log('Remote description set (Answer)');\n                } else {\n                    console.warn('Received Answer for unknown peer:', data.from);\n                }\n            });\n\n            s.on('ice-candidate', async (data) => {\n                const pc = peersRef.current[data.from];\n                if (pc && data.candidate) await pc.addIceCandidate(new RTCIceCandidate(data.candidate));\n            });\n\n            s.on('user-disconnected', (userId: string) => {\n                console.log('User disconnected:', userId);\n                if (peersRef.current[userId]) {\n                    peersRef.current[userId].close();\n                    delete peersRef.current[userId];\n                }\n                setPeers(prev => prev.filter(p => p.id !== userId));\n            });\n\n            s.on('chat-message', (data: ChatMessage) => {\n                console.log('Received chat message:', data);\n                setChatMessages(prev => [...prev, data]);\n            });\n\n        }).catch(err => {\n            console.error(\"Failed to get local media\", err);\n            setError(err);\n        });\n\n        return () => {\n            s.disconnect();\n            localStreamRef.current?.getTracks().forEach(t => t.stop());\n            Object.values(peersRef.current).forEach(pc => pc.close());\n        };\n    }, [roomId, createPeer]);\n\n    const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n    const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n\n    const [isScreenSharing, setIsScreenSharing] = useState(false);\n    const originalVideoTrackRef = useRef<MediaStreamTrack | null>(null);\n\n    const toggleAudio = useCallback(() => {\n        if (localStreamRef.current) {\n            const audioTrack = localStreamRef.current.getAudioTracks()[0];\n            if (audioTrack) {\n                audioTrack.enabled = !audioTrack.enabled;\n                setIsAudioEnabled(audioTrack.enabled);\n            }\n        }\n    }, []);\n\n    const toggleVideo = useCallback(() => {\n        if (localStreamRef.current) {\n            const videoTrack = localStreamRef.current.getVideoTracks()[0];\n            if (videoTrack) {\n                videoTrack.enabled = !videoTrack.enabled;\n                setIsVideoEnabled(videoTrack.enabled);\n            }\n        }\n    }, []);\n\n    const stopScreenShare = useCallback(async () => {\n        if (localStreamRef.current) {\n            const screenTrack = localStreamRef.current.getVideoTracks()[0];\n            if (screenTrack) {\n                screenTrack.stop();\n                localStreamRef.current.removeTrack(screenTrack);\n            }\n\n            try {\n                const newStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n                const newVideoTrack = newStream.getVideoTracks()[0];\n\n                localStreamRef.current.addTrack(newVideoTrack);\n\n                Object.values(peersRef.current).forEach(pc => {\n                    const sender = pc.getSenders().find(s => s.track?.kind === 'video');\n                    if (sender) {\n                        sender.replaceTrack(newVideoTrack);\n                    }\n                });\n\n                setIsScreenSharing(false);\n                originalVideoTrackRef.current = null;\n\n                setLocalStream(new MediaStream(localStreamRef.current.getTracks()));\n\n            } catch (e) {\n                console.error(\"Failed to restore camera\", e);\n                setIsScreenSharing(false);\n            }\n        }\n    }, [roomId]);\n\n\n    const shareScreen = useCallback(async () => {\n        try {\n            const screenStream = await navigator.mediaDevices.getDisplayMedia({\n                video: true,\n                audio: false\n            });\n            const screenTrack = screenStream.getVideoTracks()[0];\n\n            if (localStreamRef.current) {\n                const currentVideoTrack = localStreamRef.current.getVideoTracks()[0];\n                if (currentVideoTrack) {\n                    originalVideoTrackRef.current = currentVideoTrack;\n                    currentVideoTrack.stop();\n                    localStreamRef.current.removeTrack(currentVideoTrack);\n                    localStreamRef.current.addTrack(screenTrack);\n\n                    Object.values(peersRef.current).forEach(pc => {\n                        const sender = pc.getSenders().find(s => s.track?.kind === 'video');\n                        if (sender) {\n                            sender.replaceTrack(screenTrack);\n                        }\n                    });\n\n                    screenTrack.onended = () => {\n                        stopScreenShare();\n                    };\n\n                    setIsScreenSharing(true);\n                    setLocalStream(new MediaStream(localStreamRef.current.getTracks()));\n                }\n            }\n        } catch (err) {\n            console.error(\"Failed to share screen\", err);\n        }\n    }, [stopScreenShare]);\n\n    const sendMessage = useCallback((message: string) => {\n        if (!socketRef.current) return;\n\n        const chatMessage: ChatMessage = {\n            id: Date.now().toString() + Math.random().toString(36),\n            userId: socketRef.current.id || 'unknown',\n            userName: username,\n            message,\n            timestamp: Date.now()\n        };\n\n        setChatMessages(prev => [...prev, chatMessage]);\n\n        socketRef.current.emit('chat-message', { ...chatMessage, roomId });\n    }, [roomId, username]);\n\n    const allPeers = localStream\n        ? [{ id: 'local', stream: localStream, isLocal: true }, ...peers]\n        : peers;\n\n    return {\n        localStream,\n        peers: allPeers,\n        socket,\n        error,\n        toggleAudio,\n        toggleVideo,\n        isAudioEnabled,\n        isVideoEnabled,\n        shareScreen,\n        stopScreenShare,\n        isScreenSharing,\n        isConnected,\n        chatMessages,\n        sendMessage\n    };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/ui/Card.tsx"],"sourcesContent":["'use client';\n\nimport { motion, HTMLMotionProps } from 'framer-motion';\nimport { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nfunction cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\ninterface CardProps extends HTMLMotionProps<\"div\"> {\n    isCyber?: boolean;\n}\n\nexport function Card({ className, children, isCyber, ...props }: CardProps) {\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className={cn(\n                'backdrop-blur-xl border transition-all duration-500',\n                isCyber\n                    ? 'bg-cyber-black/90 border-cyber-cyan/50 cyber-border p-8'\n                    : 'bg-zinc-900/80 border-white/5 rounded-2xl p-6',\n                className\n            )}\n            {...props}\n        >\n            {children}\n        </motion.div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,GAAG,GAAG,MAAoB;IAC/B,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB;AAMO,SAAS,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,OAAkB;IACtE,qBACI,8OAAC,oMAAM,CAAC,GAAG;QACP,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,aAAa;YAAE,SAAS;YAAG,GAAG;QAAE;QAChC,UAAU;YAAE,MAAM;QAAK;QACvB,WAAW,GACP,uDACA,UACM,4DACA,iDACN;QAEH,GAAG,KAAK;kBAER;;;;;;AAGb"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/studio/VideoGrid.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { motion } from 'framer-motion';\nimport { User } from 'lucide-react';\nimport { Card } from '@/components/ui/Card';\nimport type { WebRTCStream } from '@/hooks/useWebRTC';\n\ninterface VideoGridProps {\n    peers: WebRTCStream[];\n}\n\nexport function VideoGrid({ peers }: VideoGridProps) {\n    return (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full h-full p-6\">\n            {peers.map((peer) => (\n                <VideoPlayer key={peer.id} stream={peer.stream} isLocal={peer.isLocal} id={peer.id} />\n            ))}\n            {peers.length === 0 && (\n                <div className=\"col-span-full flex items-center justify-center h-64 text-gray-400\">\n                    <p>Connecting to studio...</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\nfunction VideoPlayer({ stream, isLocal, id }: { stream: MediaStream; isLocal?: boolean; id: string }) {\n    const videoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n        if (videoRef.current && stream) {\n            videoRef.current.srcObject = stream;\n        }\n    }, [stream]);\n\n    return (\n        <Card className=\"relative overflow-hidden aspect-video p-0 bg-black border-none group\">\n            <video\n                ref={videoRef}\n                autoPlay\n                playsInline\n                muted={isLocal} // Mute local to prevent feedback\n                className=\"w-full h-full object-cover rounded-xl\"\n            />\n            <div className=\"absolute bottom-4 left-4 bg-black/50 backdrop-blur-md px-3 py-1 rounded-full text-white text-sm font-medium flex items-center gap-2\">\n                <User className=\"w-4 h-4\" />\n                {isLocal ? 'You' : `Peer ${id.substr(0, 4)}`}\n            </div>\n            {/* Audio Indicator (Simple visual) */}\n            <div className=\"absolute top-4 right-4 bg-green-500/80 p-1.5 rounded-full\" />\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AAYO,SAAS,UAAU,EAAE,KAAK,EAAkB;IAC/C,qBACI,8OAAC;QAAI,WAAU;;YACV,MAAM,GAAG,CAAC,CAAC,qBACR,8OAAC;oBAA0B,QAAQ,KAAK,MAAM;oBAAE,SAAS,KAAK,OAAO;oBAAE,IAAI,KAAK,EAAE;mBAAhE,KAAK,EAAE;;;;;YAE5B,MAAM,MAAM,KAAK,mBACd,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;8BAAE;;;;;;;;;;;;;;;;;AAKvB;AAEA,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAA0D;IAChG,MAAM,WAAW,IAAA,+MAAM,EAAmB;IAE1C,IAAA,kNAAS,EAAC;QACN,IAAI,SAAS,OAAO,IAAI,QAAQ;YAC5B,SAAS,OAAO,CAAC,SAAS,GAAG;QACjC;IACJ,GAAG;QAAC;KAAO;IAEX,qBACI,8OAAC,wIAAI;QAAC,WAAU;;0BACZ,8OAAC;gBACG,KAAK;gBACL,QAAQ;gBACR,WAAW;gBACX,OAAO;gBACP,WAAU;;;;;;0BAEd,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBACf,UAAU,QAAQ,CAAC,KAAK,EAAE,GAAG,MAAM,CAAC,GAAG,IAAI;;;;;;;0BAGhD,8OAAC;gBAAI,WAAU;;;;;;;;;;;;AAG3B"}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/hooks/useFFmpeg.ts"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { FFmpeg } from '@ffmpeg/ffmpeg';\nimport { toBlobURL } from '@ffmpeg/util';\n\nexport function useFFmpeg() {\n    const [loaded, setLoaded] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const ffmpegRef = useRef(new FFmpeg());\n    const messageRef = useRef<HTMLParagraphElement | null>(null);\n\n    const load = async () => {\n        setIsLoading(true);\n        const baseURL = 'https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd';\n        const ffmpeg = ffmpegRef.current;\n\n        ffmpeg.on('log', ({ message }) => {\n            console.log(message);\n            if (messageRef.current) messageRef.current.innerHTML = message;\n        });\n\n        try {\n            await ffmpeg.load({\n                coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),\n                wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),\n            });\n            setLoaded(true);\n        } catch (error) {\n            console.error(\"FFmpeg load failed:\", error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        load();\n    }, []);\n\n    return { ffmpeg: ffmpegRef.current, loaded, isLoading, messageRef };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAMO,SAAS;IACZ,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,YAAY,IAAA,+MAAM,EAAC,IAAI,qKAAM;IACnC,MAAM,aAAa,IAAA,+MAAM,EAA8B;IAEvD,MAAM,OAAO;QACT,aAAa;QACb,MAAM,UAAU;QAChB,MAAM,SAAS,UAAU,OAAO;QAEhC,OAAO,EAAE,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE;YACzB,QAAQ,GAAG,CAAC;YACZ,IAAI,WAAW,OAAO,EAAE,WAAW,OAAO,CAAC,SAAS,GAAG;QAC3D;QAEA,IAAI;YACA,MAAM,OAAO,IAAI,CAAC;gBACd,SAAS,MAAM,IAAA,qKAAS,EAAC,GAAG,QAAQ,eAAe,CAAC,EAAE;gBACtD,SAAS,MAAM,IAAA,qKAAS,EAAC,GAAG,QAAQ,iBAAiB,CAAC,EAAE;YAC5D;YACA,UAAU;QACd,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,uBAAuB;QACzC,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,OAAO;QAAE,QAAQ,UAAU,OAAO;QAAE;QAAQ;QAAW;IAAW;AACtE"}},
    {"offset": {"line": 614, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/ui/Button.tsx"],"sourcesContent":["'use client';\n\nimport { motion, HTMLMotionProps } from 'framer-motion';\nimport { Loader2 } from 'lucide-react';\nimport { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nfunction cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\nimport React from 'react';\n\ninterface ButtonProps extends HTMLMotionProps<\"button\"> {\n    variant?: 'primary' | 'secondary' | 'ghost' | 'danger' | 'cyber';\n    size?: 'sm' | 'md' | 'lg';\n    isLoading?: boolean;\n    children: React.ReactNode;\n}\n\nexport function Button({\n    className,\n    variant = 'primary',\n    size = 'md',\n    isLoading,\n    children,\n    disabled,\n    ...props\n}: ButtonProps) {\n    const variants = {\n        primary: 'bg-cyber-cyan text-cyber-black hover:bg-white shadow-[0_0_15px_rgba(0,255,255,0.5)]',\n        secondary: 'bg-transparent text-cyber-cyan border border-cyber-cyan hover:bg-cyber-cyan/10',\n        ghost: 'bg-transparent hover:bg-cyber-cyan/5 text-gray-300',\n        danger: 'bg-cyber-pink text-white hover:bg-pink-400 shadow-[0_0_15px_rgba(255,0,255,0.5)]',\n        cyber: 'bg-cyber-yellow text-cyber-black hover:bg-white cyber-button-clip font-black italic uppercase tracking-tighter',\n    };\n\n    const sizes = {\n        sm: 'px-3 py-1.5 text-xs',\n        md: 'px-5 py-2.5 text-sm',\n        lg: 'px-8 py-3.5 text-base',\n    };\n\n    return (\n        <motion.button\n            whileHover={{ scale: 1.02, x: variant === 'cyber' ? 5 : 0 }}\n            whileTap={{ scale: 0.98 }}\n            className={cn(\n                'inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed',\n                variant === 'cyber' ? '' : 'rounded-xl',\n                variants[variant],\n                sizes[size],\n                className\n            )}\n            disabled={disabled || isLoading}\n            {...props}\n        >\n            {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n            {children}\n        </motion.button>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,SAAS,GAAG,GAAG,MAAoB;IAC/B,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB;AAWO,SAAS,OAAO,EACnB,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,GAAG,OACO;IACV,MAAM,WAAW;QACb,SAAS;QACT,WAAW;QACX,OAAO;QACP,QAAQ;QACR,OAAO;IACX;IAEA,MAAM,QAAQ;QACV,IAAI;QACJ,IAAI;QACJ,IAAI;IACR;IAEA,qBACI,8OAAC,oMAAM,CAAC,MAAM;QACV,YAAY;YAAE,OAAO;YAAM,GAAG,YAAY,UAAU,IAAI;QAAE;QAC1D,UAAU;YAAE,OAAO;QAAK;QACxB,WAAW,GACP,oJACA,YAAY,UAAU,KAAK,cAC3B,QAAQ,CAAC,QAAQ,EACjB,KAAK,CAAC,KAAK,EACX;QAEJ,UAAU,YAAY;QACrB,GAAG,KAAK;;YAER,2BAAa,8OAAC,4NAAO;gBAAC,WAAU;;;;;;YAChC;;;;;;;AAGb"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/studio/Editor.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useFFmpeg } from '@/hooks/useFFmpeg';\nimport { Button } from '@/components/ui/Button';\nimport { Card } from '@/components/ui/Card';\nimport { Play, Pause, Scissors, Download, Loader2 } from 'lucide-react';\n\ninterface EditorProps {\n    recordedChunks: Blob[];\n}\n\nexport function Editor({ recordedChunks }: EditorProps) {\n    const { ffmpeg, loaded, isLoading } = useFFmpeg();\n    const [videoUrl, setVideoUrl] = useState<string | null>(null);\n    const [isPlaying, setIsPlaying] = useState(false);\n    const videoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n        if (recordedChunks.length > 0) {\n            const blob = new Blob(recordedChunks, { type: 'video/webm' });\n            const url = URL.createObjectURL(blob);\n            setVideoUrl(url);\n            return () => URL.revokeObjectURL(url);\n        }\n    }, [recordedChunks]);\n\n    const handlePlayPause = () => {\n        if (videoRef.current) {\n            if (isPlaying) {\n                videoRef.current.pause();\n            } else {\n                videoRef.current.play();\n            }\n            setIsPlaying(!isPlaying);\n        }\n    };\n\n    const processVideo = async () => {\n        if (!loaded) return;\n\n        try {\n            const videoBlob = new Blob(recordedChunks, { type: 'video/webm' });\n            const videoData = await videoBlob.arrayBuffer();\n\n            await ffmpeg.writeFile('input.webm', new Uint8Array(videoData));\n\n            await ffmpeg.exec(['-i', 'input.webm', '-c:v', 'copy', '-c:a', 'aac', 'output.mp4']);\n\n            const data = await ffmpeg.readFile('output.mp4');\n\n            const url = URL.createObjectURL(new Blob([data as any], { type: 'video/mp4' }));\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = 'record-final.mp4';\n            a.click();\n\n            await ffmpeg.deleteFile('input.webm');\n            await ffmpeg.deleteFile('output.mp4');\n            URL.revokeObjectURL(url);\n\n        } catch (error) {\n            console.error(\"Processing failed\", error);\n        }\n    };\n\n    return (\n        <Card className=\"w-full flex flex-col gap-4\">\n            <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-bold\">Studio Editor</h3>\n                {isLoading && <span className=\"text-sm text-yellow-500 flex gap-2 items-center\"><Loader2 className=\"animate-spin w-4 h-4\" /> Loading Engine...</span>}\n                {loaded && <span className=\"text-sm text-green-500\">Engine Ready</span>}\n            </div>\n\n            <div className=\"aspect-video bg-black rounded-xl overflow-hidden relative group\">\n                {videoUrl ? (\n                    <video\n                        ref={videoRef}\n                        src={videoUrl}\n                        className=\"w-full h-full object-contain\"\n                        onEnded={() => setIsPlaying(false)}\n                    />\n                ) : (\n                    <div className=\"flex items-center justify-center h-full text-gray-500\">\n                        No Recording Yet\n                    </div>\n                )}\n            </div>\n\n            {/* Timeline / Controls */}\n            <div className=\"flex items-center gap-4\">\n                <Button onClick={handlePlayPause} disabled={!videoUrl} size=\"sm\" variant=\"secondary\">\n                    {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n                </Button>\n                <div className=\"flex-1 h-12 bg-gray-100 dark:bg-zinc-800 rounded-lg relative overflow-hidden\">\n                    <div className=\"absolute inset-y-2 left-2 right-2 bg-indigo-500/20 rounded\"></div>\n                    <div className=\"absolute top-0 bottom-0 left-[10%] w-0.5 bg-red-500\"></div>\n                </div>\n                <Button onClick={processVideo} disabled={!loaded || !videoUrl} size=\"sm\" variant=\"secondary\">\n                    <Scissors className=\"w-4 h-4 mr-2\" /> Trim\n                </Button>\n                <Button disabled={!videoUrl} size=\"sm\" variant=\"primary\">\n                    <Download className=\"w-4 h-4 mr-2\" /> Export\n                </Button>\n            </div>\n        </Card>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 932, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/ui/Input.tsx"],"sourcesContent":["'use client';\n\nimport { motion, HTMLMotionProps } from 'framer-motion';\nimport { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nfunction cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\ninterface InputProps extends HTMLMotionProps<\"input\"> {\n    label?: string;\n    error?: string;\n}\n\nexport function Input({ className, label, error, ...props }: InputProps) {\n    return (\n        <div className=\"flex flex-col gap-1.5 w-full\">\n            {label && (\n                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 ml-1\">\n                    {label}\n                </label>\n            )}\n            <motion.input\n                whileFocus={{ scale: 1.01 }}\n                className={cn(\n                    'w-full px-4 py-2.5 rounded-xl bg-white/50 dark:bg-black/50 border border-gray-200 dark:border-zinc-800 backdrop-blur-sm',\n                    'focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm',\n                    'placeholder:text-gray-400 dark:placeholder:text-gray-600 text-gray-900 dark:text-white',\n                    error && 'border-red-500 focus:ring-red-500/50 focus:border-red-500',\n                    className\n                )}\n                {...props}\n            />\n            {error && (\n                <span className=\"text-xs text-red-500 ml-1\">{error}</span>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,GAAG,GAAG,MAAoB;IAC/B,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB;AAOO,SAAS,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,OAAmB;IACnE,qBACI,8OAAC;QAAI,WAAU;;YACV,uBACG,8OAAC;gBAAM,WAAU;0BACZ;;;;;;0BAGT,8OAAC,oMAAM,CAAC,KAAK;gBACT,YAAY;oBAAE,OAAO;gBAAK;gBAC1B,WAAW,GACP,2HACA,6GACA,0FACA,SAAS,6DACT;gBAEH,GAAG,KAAK;;;;;;YAEZ,uBACG,8OAAC;gBAAK,WAAU;0BAA6B;;;;;;;;;;;;AAI7D"}},
    {"offset": {"line": 990, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/studio/Chat.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Send } from 'lucide-react';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\n\n// Message structure for real-time chat\nexport type ChatMessage = {\n    id: string;\n    userId: string;\n    userName: string;\n    message: string;\n    timestamp: number;\n};\n\ninterface ChatProps {\n    messages: ChatMessage[];\n    onSendMessage: (message: string) => void;\n    currentUserId: string;\n}\n\n/**\n * Real-time chat component for studio collaboration\n * Supports auto-scroll, keyboard shortcuts, and message formatting\n */\nexport function Chat({ messages, onSendMessage, currentUserId }: ChatProps) {\n    const [inputMessage, setInputMessage] = useState('');\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n\n    // Auto-scroll to latest message\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    // Scroll when new messages arrive\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages]);\n\n    const handleSend = () => {\n        if (inputMessage.trim()) {\n            onSendMessage(inputMessage);\n            setInputMessage('');\n        }\n    };\n\n    // Send message on Enter, allow Shift+Enter for new line\n    const handleKeyPress = (e: React.KeyboardEvent) => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleSend();\n        }\n    };\n\n    // Format timestamp to readable time (HH:MM)\n    const formatTime = (timestamp: number) => {\n        return new Date(timestamp).toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    return (\n        <div className=\"flex flex-col h-full bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800\">\n            {/* Header */}\n            <div className=\"p-4 border-b border-gray-200 dark:border-gray-800\">\n                <h2 className=\"text-lg font-bold dark:text-white\">Chat</h2>\n            </div>\n\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n                {messages.length === 0 ? (\n                    <div className=\"text-center text-gray-400 mt-8\">\n                        <p>No messages yet</p>\n                        <p className=\"text-sm\">Start the conversation!</p>\n                    </div>\n                ) : (\n                    messages.map((msg) => (\n                        <div\n                            key={msg.id}\n                            className={`flex flex-col ${msg.userId === currentUserId ? 'items-end' : 'items-start'\n                                }`}\n                        >\n                            <div\n                                className={`max-w-[80%] rounded-lg px-4 py-2 ${msg.userId === currentUserId\n                                    ? 'bg-indigo-500 text-white'\n                                    : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white'\n                                    }`}\n                            >\n                                {msg.userId !== currentUserId && (\n                                    <p className=\"text-xs font-semibold mb-1 opacity-70\">\n                                        {msg.userName}\n                                    </p>\n                                )}\n                                <p className=\"text-sm break-words\">{msg.message}</p>\n                            </div>\n                            <span className=\"text-xs text-gray-400 mt-1 px-2\">\n                                {formatTime(msg.timestamp)}\n                            </span>\n                        </div>\n                    ))\n                )}\n                <div ref={messagesEndRef} />\n            </div>\n\n            {/* Input */}\n            <div className=\"p-4 border-t border-gray-200 dark:border-gray-800\">\n                <div className=\"flex gap-2\">\n                    <Input\n                        value={inputMessage}\n                        onChange={(e) => setInputMessage(e.target.value)}\n                        onKeyPress={handleKeyPress}\n                        placeholder=\"Type a message...\"\n                        className=\"flex-1\"\n                    />\n                    <Button\n                        onClick={handleSend}\n                        disabled={!inputMessage.trim()}\n                        className=\"rounded-full\"\n                        size=\"lg\"\n                    >\n                        <Send className=\"w-5 h-5\" />\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AA0BO,SAAS,KAAK,EAAE,QAAQ,EAAE,aAAa,EAAE,aAAa,EAAa;IACtE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,iBAAiB,IAAA,+MAAM,EAAiB;IAE9C,gCAAgC;IAChC,MAAM,iBAAiB;QACnB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAChE;IAEA,kCAAkC;IAClC,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG;QAAC;KAAS;IAEb,MAAM,aAAa;QACf,IAAI,aAAa,IAAI,IAAI;YACrB,cAAc;YACd,gBAAgB;QACpB;IACJ;IAEA,wDAAwD;IACxD,MAAM,iBAAiB,CAAC;QACpB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YAClC,EAAE,cAAc;YAChB;QACJ;IACJ;IAEA,4CAA4C;IAC5C,MAAM,aAAa,CAAC;QAChB,OAAO,IAAI,KAAK,WAAW,kBAAkB,CAAC,SAAS;YACnD,MAAM;YACN,QAAQ;QACZ;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BAAoC;;;;;;;;;;;0BAItD,8OAAC;gBAAI,WAAU;;oBACV,SAAS,MAAM,KAAK,kBACjB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAE;;;;;;0CACH,8OAAC;gCAAE,WAAU;0CAAU;;;;;;;;;;;+BAG3B,SAAS,GAAG,CAAC,CAAC,oBACV,8OAAC;4BAEG,WAAW,CAAC,cAAc,EAAE,IAAI,MAAM,KAAK,gBAAgB,cAAc,eACnE;;8CAEN,8OAAC;oCACG,WAAW,CAAC,iCAAiC,EAAE,IAAI,MAAM,KAAK,gBACxD,6BACA,8DACA;;wCAEL,IAAI,MAAM,KAAK,+BACZ,8OAAC;4CAAE,WAAU;sDACR,IAAI,QAAQ;;;;;;sDAGrB,8OAAC;4CAAE,WAAU;sDAAuB,IAAI,OAAO;;;;;;;;;;;;8CAEnD,8OAAC;oCAAK,WAAU;8CACX,WAAW,IAAI,SAAS;;;;;;;2BAlBxB,IAAI,EAAE;;;;;kCAuBvB,8OAAC;wBAAI,KAAK;;;;;;;;;;;;0BAId,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,0IAAK;4BACF,OAAO;4BACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;4BAC/C,YAAY;4BACZ,aAAY;4BACZ,WAAU;;;;;;sCAEd,8OAAC,4IAAM;4BACH,SAAS;4BACT,UAAU,CAAC,aAAa,IAAI;4BAC5B,WAAU;4BACV,MAAK;sCAEL,cAAA,8OAAC,0MAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMxC"}},
    {"offset": {"line": 1194, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/components/studio/UsernameModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { User } from 'lucide-react';\n\ninterface UsernameModalProps {\n    onSubmit: (username: string) => void;\n}\n\nexport function UsernameModal({ onSubmit }: UsernameModalProps) {\n    const [username, setUsername] = useState('');\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (username.trim()) {\n            onSubmit(username.trim());\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl max-w-md w-full p-8 border border-gray-200 dark:border-gray-800\">\n                <div className=\"flex flex-col items-center mb-8\">\n                    <div className=\"p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-full mb-4\">\n                        <User className=\"w-8 h-8 text-indigo-600 dark:text-indigo-400\" />\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n                        Welcome to PoPo Studio\n                    </h2>\n                    <p className=\"text-gray-600 dark:text-gray-400 text-center\">\n                        Enter your name to join the session\n                    </p>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                    <div>\n                        <Input\n                            type=\"text\"\n                            placeholder=\"Your name\"\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                            className=\"text-lg h-14\"\n                            autoFocus\n                            maxLength={20}\n                        />\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">\n                            This is how others will see you in chat\n                        </p>\n                    </div>\n\n                    <Button\n                        type=\"submit\"\n                        size=\"lg\"\n                        className=\"w-full rounded-full h-14 text-lg\"\n                        disabled={!username.trim()}\n                    >\n                        Join Studio\n                    </Button>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAWO,SAAS,cAAc,EAAE,QAAQ,EAAsB;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,SAAS,IAAI,IAAI;YACjB,SAAS,SAAS,IAAI;QAC1B;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,0MAAI;gCAAC,WAAU;;;;;;;;;;;sCAEpB,8OAAC;4BAAG,WAAU;sCAAwD;;;;;;sCAGtE,8OAAC;4BAAE,WAAU;sCAA+C;;;;;;;;;;;;8BAKhE,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,8OAAC;;8CACG,8OAAC,0IAAK;oCACF,MAAK;oCACL,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,WAAU;oCACV,SAAS;oCACT,WAAW;;;;;;8CAEf,8OAAC;oCAAE,WAAU;8CAAgD;;;;;;;;;;;;sCAKjE,8OAAC,4IAAM;4BACH,MAAK;4BACL,MAAK;4BACL,WAAU;4BACV,UAAU,CAAC,SAAS,IAAI;sCAC3B;;;;;;;;;;;;;;;;;;;;;;;AAOrB"}},
    {"offset": {"line": 1327, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/hooks/useRecorder.ts"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useCallback } from 'react';\n\nexport function useRecorder() {\n    const [isRecording, setIsRecording] = useState(false);\n    const [recordedChunks, setRecordedChunks] = useState<Blob[]>([]);\n    const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n\n    const startRecording = useCallback((stream: MediaStream) => {\n        if (!stream) return;\n\n        setRecordedChunks([]);\n        setRecordedChunks([]);\n\n        let mimeType = 'video/webm; codecs=vp9,opus';\n        if (!MediaRecorder.isTypeSupported(mimeType)) {\n            mimeType = 'video/webm; codecs=vp9'; // Fallback\n            if (!MediaRecorder.isTypeSupported(mimeType)) {\n                mimeType = 'video/webm'; // Generic fallback\n            }\n        }\n\n        const mediaRecorder = new MediaRecorder(stream, {\n            mimeType\n        });\n\n        mediaRecorderRef.current = mediaRecorder;\n\n        mediaRecorder.ondataavailable = (event) => {\n            if (event.data.size > 0) {\n                setRecordedChunks((prev) => [...prev, event.data]);\n            }\n        };\n\n        mediaRecorder.start(1000); // Collect 1s chunks\n        setIsRecording(true);\n    }, []);\n\n    const stopRecording = useCallback(() => {\n        if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n            mediaRecorderRef.current.stop();\n            setIsRecording(false);\n        }\n    }, []);\n\n    const getBlob = useCallback(() => {\n        return new Blob(recordedChunks, { type: 'video/webm' });\n    }, [recordedChunks]);\n\n    return {\n        isRecording,\n        startRecording,\n        stopRecording,\n        recordedChunks,\n        getBlob\n    };\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,SAAS;IACZ,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC/D,MAAM,mBAAmB,IAAA,+MAAM,EAAuB;IAEtD,MAAM,iBAAiB,IAAA,oNAAW,EAAC,CAAC;QAChC,IAAI,CAAC,QAAQ;QAEb,kBAAkB,EAAE;QACpB,kBAAkB,EAAE;QAEpB,IAAI,WAAW;QACf,IAAI,CAAC,cAAc,eAAe,CAAC,WAAW;YAC1C,WAAW,0BAA0B,WAAW;YAChD,IAAI,CAAC,cAAc,eAAe,CAAC,WAAW;gBAC1C,WAAW,cAAc,mBAAmB;YAChD;QACJ;QAEA,MAAM,gBAAgB,IAAI,cAAc,QAAQ;YAC5C;QACJ;QAEA,iBAAiB,OAAO,GAAG;QAE3B,cAAc,eAAe,GAAG,CAAC;YAC7B,IAAI,MAAM,IAAI,CAAC,IAAI,GAAG,GAAG;gBACrB,kBAAkB,CAAC,OAAS;2BAAI;wBAAM,MAAM,IAAI;qBAAC;YACrD;QACJ;QAEA,cAAc,KAAK,CAAC,OAAO,oBAAoB;QAC/C,eAAe;IACnB,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAC9B,IAAI,iBAAiB,OAAO,IAAI,iBAAiB,OAAO,CAAC,KAAK,KAAK,aAAa;YAC5E,iBAAiB,OAAO,CAAC,IAAI;YAC7B,eAAe;QACnB;IACJ,GAAG,EAAE;IAEL,MAAM,UAAU,IAAA,oNAAW,EAAC;QACxB,OAAO,IAAI,KAAK,gBAAgB;YAAE,MAAM;QAAa;IACzD,GAAG;QAAC;KAAe;IAEnB,OAAO;QACH;QACA;QACA;QACA;QACA;IACJ;AACJ"}},
    {"offset": {"line": 1407, "column": 0}, "map": {"version":3,"sources":["file:///Users/sneha/Downloads/PoPo-main/frontend/src/app/studio/page.tsx"],"sourcesContent":["'use client';\n\nimport { useWebRTC } from '@/hooks/useWebRTC';\nimport { VideoGrid } from '@/components/studio/VideoGrid';\nimport { Editor } from '@/components/studio/Editor';\nimport { Chat } from '@/components/studio/Chat';\nimport { UsernameModal } from '@/components/studio/UsernameModal';\nimport { Button } from '@/components/ui/Button';\nimport { useRecorder } from '@/hooks/useRecorder';\nimport { Mic, Video, MonitorUp, PhoneOff, Circle, MicOff, VideoOff, MessageSquare } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport { useState, useEffect } from 'react';\n\n/**\n * Main studio page for live podcast recording with WebRTC\n * Features: Multi-user video, screen sharing, recording, and real-time chat\n */\nexport default function StudioPage() {\n    const router = useRouter();\n    const [username, setUsername] = useState<string | null>(null);\n    const [showChat, setShowChat] = useState(false);\n\n    // Load saved username from localStorage on mount\n    useEffect(() => {\n        const savedUsername = localStorage.getItem('popo-username');\n        if (savedUsername) {\n            setUsername(savedUsername);\n        }\n    }, []);\n\n    const handleUsernameSubmit = (name: string) => {\n        setUsername(name);\n        localStorage.setItem('popo-username', name);\n    };\n\n    // Initialize WebRTC for real-time peer-to-peer connections\n    const {\n        localStream,\n        peers,\n        socket,\n        error,\n        toggleAudio,\n        toggleVideo,\n        isAudioEnabled,\n        isVideoEnabled,\n        shareScreen,\n        stopScreenShare,\n        isScreenSharing,\n        chatMessages,\n        sendMessage\n    } = useWebRTC('main-studio', username || 'Anonymous');\n\n    // Recorder hook for local recording of the stream\n    const { isRecording, startRecording, stopRecording, recordedChunks } = useRecorder();\n\n    // Show username modal if not set\n    if (!username) {\n        return <UsernameModal onSubmit={handleUsernameSubmit} />;\n    }\n\n    // Show error UI if media access failed\n    if (error) {\n        return (\n            <div className=\"flex flex-col items-center justify-center min-h-[50vh] text-center p-8 space-y-4\">\n                <div className=\"p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full\">\n                    <Video className=\"w-12 h-12\" />\n                </div>\n                <h2 className=\"text-2xl font-bold\">Camera/Microphone Access Denied</h2>\n                <p className=\"text-gray-600 dark:text-gray-400 max-w-md\">\n                    We couldn't access your camera or microphone. This is usually because:\n                </p>\n                <ul className=\"text-left bg-gray-50 dark:bg-zinc-900 p-6 rounded-xl space-y-2 border border-gray-200 dark:border-white/10\">\n                    <li className=\"flex items-center gap-2\">1. You denied permission in the browser popup.</li>\n                    <li className=\"flex items-center gap-2\">2. Your operating system/settings have blocked access.</li>\n                    <li className=\"flex items-center gap-2\">3. Another application is using the camera.</li>\n                </ul>\n                <div className=\"text-xs text-red-500 font-mono bg-red-50 dark:bg-red-900/10 p-2 rounded\">\n                    Error Details: {error.name}: {error.message}\n                </div>\n                <div className=\"flex gap-4 pt-4\">\n                    <Button onClick={() => window.location.reload()}>Try Again</Button>\n                    <Button variant=\"ghost\" onClick={() => router.push('/')}>Go Back</Button>\n                </div>\n            </div>\n        );\n    }\n\n    // Toggle recording of local stream\n    const handleRecordToggle = () => {\n        if (isRecording) {\n            stopRecording();\n        } else {\n            if (localStream) startRecording(localStream);\n        }\n    };\n\n    const handleLeave = () => {\n        router.push('/');\n    };\n\n    return (\n        <div className=\"flex flex-col h-[calc(100vh-8rem)] gap-4\">\n            <div className=\"flex items-center justify-between px-2\">\n                <div>\n                    <h1 className=\"text-2xl font-black italic tracking-tighter text-white uppercase\">\n                        Studio <span className=\"text-cyber-cyan\">Interface</span>\n                    </h1>\n                    <p className=\"text-[10px] font-mono text-gray-500 uppercase tracking-widest\">[NODE: MAIN-STUDIO]</p>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                    <div className=\"px-3 py-1 border border-cyber-pink/50 text-cyber-pink text-[10px] font-black uppercase tracking-[0.2em] animate-pulse bg-cyber-pink/10\">\n                        [TRANSMITTING]\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"flex-1 flex gap-4 overflow-hidden\">\n                {/* Video Section */}\n                <div className={`transition-all ${showChat ? 'flex-[3]' : 'flex-1'} bg-gray-100 dark:bg-zinc-900/50 rounded-3xl border border-white/20 overflow-hidden relative`}>\n                    <VideoGrid peers={peers} />\n                </div>\n\n                {showChat && (\n                    <div className=\"hidden md:flex md:flex-[1] h-full rounded-3xl overflow-hidden border border-white/20\">\n                        <Chat\n                            messages={chatMessages}\n                            onSendMessage={sendMessage}\n                            currentUserId={socket?.id || ''}\n                        />\n                    </div>\n                )}\n\n                {showChat && (\n                    <div className=\"md:hidden absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end\">\n                        <div className=\"w-full h-[70%] bg-white dark:bg-gray-900 rounded-t-3xl overflow-hidden\">\n                            <Chat\n                                messages={chatMessages}\n                                onSendMessage={sendMessage}\n                                currentUserId={socket?.id || ''}\n                            />\n                            <button\n                                onClick={() => setShowChat(false)}\n                                className=\"absolute top-4 right-4 text-gray-400 hover:text-white\"\n                            >\n                                Close\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"flex items-center justify-center gap-4 py-4\">\n                <Button\n                    variant={isAudioEnabled ? \"secondary\" : \"danger\"}\n                    size=\"lg\"\n                    className=\"rounded-full shadow-md transition-all\"\n                    onClick={toggleAudio}\n                >\n                    {isAudioEnabled ? <Mic className=\"w-5 h-5\" /> : <MicOff className=\"w-5 h-5\" />}\n                </Button>\n                <Button\n                    variant={isVideoEnabled ? \"secondary\" : \"danger\"}\n                    size=\"lg\"\n                    className=\"rounded-full shadow-md transition-all\"\n                    onClick={toggleVideo}\n                >\n                    {isVideoEnabled ? <Video className=\"w-5 h-5\" /> : <VideoOff className=\"w-5 h-5\" />}\n                </Button>\n                <Button\n                    variant={isScreenSharing ? \"danger\" : \"primary\"}\n                    size=\"lg\"\n                    className=\"rounded-full px-8 shadow-xl shadow-indigo-500/20\"\n                    onClick={isScreenSharing ? stopScreenShare : shareScreen}\n                >\n                    <MonitorUp className={`w-5 h-5 mr-2 ${isScreenSharing ? 'animate-pulse' : ''}`} />\n                    {isScreenSharing ? 'Stop Sharing' : 'Share Screen'}\n                </Button>\n                <Button variant={isRecording ? 'danger' : 'secondary'} size=\"lg\" className=\"rounded-full shadow-md transition-all\" onClick={handleRecordToggle}>\n                    <Circle className={`w-5 h-5 ${isRecording ? 'fill-current animate-pulse' : ''}`} />\n                </Button>\n                <Button\n                    variant={showChat ? \"primary\" : \"secondary\"}\n                    size=\"lg\"\n                    className=\"rounded-full shadow-md transition-all\"\n                    onClick={() => setShowChat(!showChat)}\n                >\n                    <MessageSquare className=\"w-5 h-5 md:mr-2\" />\n                    <span className=\"hidden md:inline\">Chat</span>\n                </Button>\n                <Button variant=\"danger\" size=\"lg\" className=\"rounded-full shadow-md\" onClick={handleLeave}>\n                    <PhoneOff className=\"w-5 h-5 md:mr-2\" /> <span className=\"hidden md:inline\">Leave</span>\n                </Button>\n            </div>\n\n            {!isRecording && recordedChunks.length > 0 && <Editor recordedChunks={recordedChunks} />}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAXA;;;;;;;;;;;;AAiBe,SAAS;IACpB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,iDAAiD;IACjD,IAAA,kNAAS,EAAC;QACN,MAAM,gBAAgB,aAAa,OAAO,CAAC;QAC3C,IAAI,eAAe;YACf,YAAY;QAChB;IACJ,GAAG,EAAE;IAEL,MAAM,uBAAuB,CAAC;QAC1B,YAAY;QACZ,aAAa,OAAO,CAAC,iBAAiB;IAC1C;IAEA,2DAA2D;IAC3D,MAAM,EACF,WAAW,EACX,KAAK,EACL,MAAM,EACN,KAAK,EACL,WAAW,EACX,WAAW,EACX,cAAc,EACd,cAAc,EACd,WAAW,EACX,eAAe,EACf,eAAe,EACf,YAAY,EACZ,WAAW,EACd,GAAG,IAAA,sIAAS,EAAC,eAAe,YAAY;IAEzC,kDAAkD;IAClD,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,aAAa,EAAE,cAAc,EAAE,GAAG,IAAA,0IAAW;IAElF,iCAAiC;IACjC,IAAI,CAAC,UAAU;QACX,qBAAO,8OAAC,8JAAa;YAAC,UAAU;;;;;;IACpC;IAEA,uCAAuC;IACvC,IAAI,OAAO;QACP,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;8BAErB,8OAAC;oBAAG,WAAU;8BAAqB;;;;;;8BACnC,8OAAC;oBAAE,WAAU;8BAA4C;;;;;;8BAGzD,8OAAC;oBAAG,WAAU;;sCACV,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;;;;;;;8BAE5C,8OAAC;oBAAI,WAAU;;wBAA0E;wBACrE,MAAM,IAAI;wBAAC;wBAAG,MAAM,OAAO;;;;;;;8BAE/C,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,4IAAM;4BAAC,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;sCAAI;;;;;;sCACjD,8OAAC,4IAAM;4BAAC,SAAQ;4BAAQ,SAAS,IAAM,OAAO,IAAI,CAAC;sCAAM;;;;;;;;;;;;;;;;;;IAIzE;IAEA,mCAAmC;IACnC,MAAM,qBAAqB;QACvB,IAAI,aAAa;YACb;QACJ,OAAO;YACH,IAAI,aAAa,eAAe;QACpC;IACJ;IAEA,MAAM,cAAc;QAChB,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;;oCAAmE;kDACtE,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;;;;;;;0CAE7C,8OAAC;gCAAE,WAAU;0CAAgE;;;;;;;;;;;;kCAGjF,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;sCAAyI;;;;;;;;;;;;;;;;;0BAMhK,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,WAAW,CAAC,eAAe,EAAE,WAAW,aAAa,SAAS,4FAA4F,CAAC;kCAC5J,cAAA,8OAAC,sJAAS;4BAAC,OAAO;;;;;;;;;;;oBAGrB,0BACG,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,4IAAI;4BACD,UAAU;4BACV,eAAe;4BACf,eAAe,QAAQ,MAAM;;;;;;;;;;;oBAKxC,0BACG,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,4IAAI;oCACD,UAAU;oCACV,eAAe;oCACf,eAAe,QAAQ,MAAM;;;;;;8CAEjC,8OAAC;oCACG,SAAS,IAAM,YAAY;oCAC3B,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;0BAQjB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,4IAAM;wBACH,SAAS,iBAAiB,cAAc;wBACxC,MAAK;wBACL,WAAU;wBACV,SAAS;kCAER,+BAAiB,8OAAC,uMAAG;4BAAC,WAAU;;;;;iDAAe,8OAAC,oNAAM;4BAAC,WAAU;;;;;;;;;;;kCAEtE,8OAAC,4IAAM;wBACH,SAAS,iBAAiB,cAAc;wBACxC,MAAK;wBACL,WAAU;wBACV,SAAS;kCAER,+BAAiB,8OAAC,6MAAK;4BAAC,WAAU;;;;;iDAAe,8OAAC,0NAAQ;4BAAC,WAAU;;;;;;;;;;;kCAE1E,8OAAC,4IAAM;wBACH,SAAS,kBAAkB,WAAW;wBACtC,MAAK;wBACL,WAAU;wBACV,SAAS,kBAAkB,kBAAkB;;0CAE7C,8OAAC,6NAAS;gCAAC,WAAW,CAAC,aAAa,EAAE,kBAAkB,kBAAkB,IAAI;;;;;;4BAC7E,kBAAkB,iBAAiB;;;;;;;kCAExC,8OAAC,4IAAM;wBAAC,SAAS,cAAc,WAAW;wBAAa,MAAK;wBAAK,WAAU;wBAAwC,SAAS;kCACxH,cAAA,8OAAC,gNAAM;4BAAC,WAAW,CAAC,QAAQ,EAAE,cAAc,+BAA+B,IAAI;;;;;;;;;;;kCAEnF,8OAAC,4IAAM;wBACH,SAAS,WAAW,YAAY;wBAChC,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,YAAY,CAAC;;0CAE5B,8OAAC,yOAAa;gCAAC,WAAU;;;;;;0CACzB,8OAAC;gCAAK,WAAU;0CAAmB;;;;;;;;;;;;kCAEvC,8OAAC,4IAAM;wBAAC,SAAQ;wBAAS,MAAK;wBAAK,WAAU;wBAAyB,SAAS;;0CAC3E,8OAAC,0NAAQ;gCAAC,WAAU;;;;;;4BAAoB;0CAAC,8OAAC;gCAAK,WAAU;0CAAmB;;;;;;;;;;;;;;;;;;YAInF,CAAC,eAAe,eAAe,MAAM,GAAG,mBAAK,8OAAC,gJAAM;gBAAC,gBAAgB;;;;;;;;;;;;AAGlF"}}]
}